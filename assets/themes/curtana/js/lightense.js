var Lightense=function(){"use strict";function a(a){var c=a.length;if(c)for(var d=0;d<c;d++)b(a[d]);else b(a)}function b(a){var b=a.getAttribute("data-image")||a.src;b&&(a.classList.add("lightense-target"),a.addEventListener("click",function(a){return a.metaKey||a.ctrlKey?n.open(b,"_blank"):void i(this)},!1))}function c(){var a="\n      .lightense-backdrop {\n        box-sizing: border-box;\n        width: 100%;\n        height: 100%;\n        position: fixed;\n        top: 0;\n        left: 0;\n        overflow: hidden;\n        z-index: "+(p.zIndex-1)+";\n        padding: 0;\n        margin: 0;\n        transition: opacity "+p.time+"ms ease;\n        cursor: zoom-out;\n        opacity: 0;\n        background-color: rgba(255, 255, 255, .98);\n        visibility: hidden;\n      }\n\n      @supports (-webkit-backdrop-filter: blur(30px)) {\n        .lightense-backdrop {\n          background-color: rgba(255, 255, 255, .6);\n          -webkit-backdrop-filter: blur(30px);\n          backdrop-filter: blur(30px);\n        }\n      }\n\n      .lightense-wrap {\n        position: relative;\n        transition: transform "+p.time+"ms "+p.cubicBezier+";\n        z-index: "+p.zIndex+";\n        -webkit-user-select: none;\n        user-select: none;\n      }\n\n      .lightense-target {\n        cursor: zoom-in;\n        transition: transform "+p.time+"ms "+p.cubicBezier+";\n      }\n\n      .lightense-open {\n        cursor: zoom-out;\n      }\n\n      .lightense-transitioning {\n        pointer-events: none;\n      }\n    ",b=o.head||o.getElementsByTagName("head")[0],c=o.createElement("style");c.styleSheet?c.styleSheet.cssText=a:c.appendChild(o.createTextNode(a)),b.appendChild(c)}function d(){p.container=o.createElement("div"),p.container.className="lightense-backdrop",o.body.appendChild(p.container)}function e(a){var b=a.width,c=a.height,d=n.pageYOffset||o.documentElement.scrollTop||0,e=n.pageXOffset||o.documentElement.scrollLeft||0,f=p.target.getBoundingClientRect(),g=b/f.width,h=n.innerWidth||o.documentElement.clientWidth||0,i=n.innerHeight||o.documentElement.clientHeight||0,j=h-p.padding,k=i-p.padding,l=b/c,m=j/k;b<j&&c<k?p.scaleFactor=g:l<m?p.scaleFactor=k/c*g:p.scaleFactor=j/b*g;var q=h/2,r=d+i/2,s=f.left+e+f.width/2,t=f.top+d+f.height/2;p.translateX=q-s,p.translateY=r-t}function f(){p.target.classList.add("lightense-open"),p.wrap=o.createElement("div"),p.wrap.className="lightense-wrap",setTimeout(function(){p.target.style.transform="scale("+p.scaleFactor+")"}),p.target.parentNode.insertBefore(p.wrap,p.target),p.wrap.appendChild(p.target),setTimeout(function(){p.wrap.style.transform="translate3d("+p.translateX+"px, "+p.translateY+"px, 0)"}),p.background&&(p.container.style.backgroundColor=p.background),p.container.style.visibility="visible",setTimeout(function(){p.container.style.opacity="1"})}function g(){k(),p.target.classList.remove("lightense-open"),p.wrap.style.transform="",p.target.style.transform="",p.target.classList.add("lightense-transitioning"),p.container.style.opacity="",setTimeout(function(){p.container.style.visibility="",p.container.style.backgroundColor="",p.wrap.parentNode.replaceChild(p.target,p.wrap),p.target.classList.remove("lightense-transitioning")},p.time)}function h(){var a=Math.abs(p.scrollY-n.scrollY);a>=30&&g()}function i(a){if(p.target=a,p.target.classList.contains("lightense-open"))return g();p.scrollY=n.scrollY,p.src=a.getAttribute("data-image")||a.src,p.background=p.target.getAttribute("data-background")||!1;var b=new Image;b.onload=function(){e(this),f(),j()},b.src=p.src}function j(){n.addEventListener("keyup",l,!1),n.addEventListener("scroll",h,!1),p.container.addEventListener("click",g,!1)}function k(){n.removeEventListener("keyup",l,!1),n.removeEventListener("scroll",h,!1),p.container.removeEventListener("click",g,!1)}function l(a){a.preventDefault(),27===a.keyCode&&g()}function m(b,e){if(!b)throw"You need to pass an element!";var f=e||{};f.time&&(p.time=f.time),c(),d(),a(b)}var n=window,o=document,p={time:300,padding:40,cubicBezier:"cubic-bezier(.2, 0, .1, 1)",zIndex:2147483647};return m}();